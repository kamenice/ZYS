# Copilot Instructions for This Repo

- **Project shape**: OpenHarmony LiteOS tree targeting Hi3xxx boards; GN builds are driven by [build.py](build.py) which dispatches into [build/lite](build/lite).
- **Products and variants**: Entry points printed by [build.py](build.py) are `wifiiot`, `ipcamera_hi3516dv300`, and `ipcamera_hi3518ev300`. Run `python build.py <product>` from repo root; append `-v debug` or `-v release` (adds -O2 and strips symbols per [build/lite/ndk/README.md](build/lite/ndk/README.md)). Use `python build.py clean` to wipe outputs.
- **Outputs**: GN artifacts land under `out/`; NDK doc states app binaries show up in `out/bin`.
- **Build system layout**: GN templates and scripts live under [build/lite](build/lite); toolchain/config overlays live in `build/lite/config`, `build/lite/toolchain`, and `build/lite/config/component`. NDK guide in [build/lite/ndk/README.md](build/lite/ndk/README.md) documents default security flags (-fstack-protector-all, PIE, FORTIFY, Werror) and a minimal static/executable `BUILD.gn` sample.
- **Subsystem map**: High-level subsystems sit in [base](base) and [foundation](foundation); MCU kernel is under [kernel/liteos_m](kernel/liteos_m); vendor BSPs for the WiFi IoT board are under [vendor/hisi/hi3861](vendor/hisi/hi3861); third-party stacks (lwIP, mbedtls, MQTT, etc.) live in [third_party](third_party).
- **WiFi IoT app toggle**: [applications/sample/wifi-iot/app/BUILD.gn](applications/sample/wifi-iot/app/BUILD.gn) uses `lite_component` with a `features` array¡ªuncomment entries to include demos (e.g., `code_v2.0/ly_charter7:chapter_07`).
- **Demo target pattern**: Per [applications/sample/wifi-iot/app/code_v2.0/ly_charter7/BUILD.gn](applications/sample/wifi-iot/app/code_v2.0/ly_charter7/BUILD.gn), demos are `static_library` targets with explicit `include_dirs` pointing to `utils/native/lite`, `kernel/liteos_m/components/cmsis/2.0`, WiFi IoT kits, lwIP, and Paho MQTT. Add a new demo by creating a peer `BUILD.gn` under `code_v2.0/<group>`, listing sources/includes, then referencing the target from the parent `features` array so GN exports it.
- **Board specifics**: Hi3861 SDK overview and directory map are in [vendor/hisi/hi3861/hi3861/README.md](vendor/hisi/hi3861/hi3861/README.md); prefer reusing vendor drivers and kit headers in [base/iot_hardware/interfaces/kits/wifiiot_lite](base/iot_hardware/interfaces/kits/wifiiot_lite) instead of duplicating hardware access.
- **Build ergonomics**: GN root imports in [build/lite/ndk/README.md](build/lite/ndk/README.md) show how to wire new apps into the top-level `group("ohos")`; keep include paths `//`-rooted and dependencies explicit.
- **Where to look for docs**: Build subsystem pointer lives in [build/lite/readme.md](build/lite/readme.md); broader project docs start at [docs/Readme-CN.md](docs/Readme-CN.md).

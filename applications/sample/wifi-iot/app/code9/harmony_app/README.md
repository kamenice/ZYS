# 智能传送带系统 - HarmonyOS 手机 APP

本目录包含用于 DevEco Studio 的 ArkTS 界面文件，用于创建与智能传送带系统配套的手机 APP。

## 文件说明

- `Index.ets` - 主界面文件，使用 ArkTS 语言编写

## 功能特性

### 界面显示

1. **物品检测状态** - 显示 HX711 压力传感器检测到的物品状态
2. **温度监控** - 显示 DHT11 传感器测量的温度，超过 30°C 显示高温警报
3. **电机状态** - 显示 TB6612 驱动的电机运行状态（运行中/已停止）
4. **连接状态** - 显示与设备的 MQTT 连接状态
5. **系统信息** - 显示 WiFi 名称和服务器地址

### MQTT 配置

- **WiFi**: SSID `zys`, 密码 `12345678`
- **服务器**: `192.168.43.230:1883`
- **主题**: `conveyor`
- **数据格式**: `{"hasItem":X,"temperature":Y.Y,"motorState":Z}`

## 使用方法

### 在 DevEco Studio 中创建项目

1. 打开 DevEco Studio
2. 创建新的 HarmonyOS 项目（选择 Empty Ability 模板）
3. 将 `Index.ets` 文件复制到项目的 `entry/src/main/ets/pages/` 目录
4. 替换默认的 `Index.ets` 文件

### 添加图标资源

在 `entry/src/main/resources/base/media/` 目录下添加以下图标：
- `ic_item.png` - 物品检测图标
- `ic_temp.png` - 温度图标
- `ic_motor.png` - 电机图标
- `ic_alarm.png` - 警报图标

### 配置 MQTT 连接（可选）

如需实际连接 MQTT 服务器，需要：
1. 添加 MQTT 客户端库依赖
2. 在 `aboutToAppear()` 方法中初始化 MQTT 连接
3. 在 MQTT 消息回调中调用 `parseData()` 方法更新界面

### 运行和调试

1. 连接 HarmonyOS 设备或启动模拟器
2. 点击运行按钮部署应用
3. 确保手机连接到 `zys` WiFi 网络
4. 点击"连接设备"按钮开始接收数据

## 界面预览

```
┌──────────────────────────────────┐
│       智能传送带系统              │
├──────────────────────────────────┤
│ ● 已连接          更新时间: 12:30│
├──────────────────────────────────┤
│ ┌──────────────────────────────┐ │
│ │ 📦 物品检测                   │ │
│ │    有物品                     │ │
│ └──────────────────────────────┘ │
│ ┌──────────────────────────────┐ │
│ │ 🌡️ 当前温度                   │ │
│ │    25.5 °C                   │ │
│ │    警报阈值: 30°C             │ │
│ └──────────────────────────────┘ │
│ ┌──────────────────────────────┐ │
│ │ ⚙️ 电机状态                   │ │
│ │    运行中 🔄                  │ │
│ └──────────────────────────────┘ │
│ ┌──────────────────────────────┐ │
│ │ 系统信息                      │ │
│ │ WiFi名称: zys                │ │
│ │ 服务器: 192.168.43.230:1883  │ │
│ └──────────────────────────────┘ │
├──────────────────────────────────┤
│      [    连接设备    ]          │
└──────────────────────────────────┘
```

## 数据说明

| 字段 | 类型 | 说明 |
|------|------|------|
| hasItem | int | 物品检测：0=无物品, 1=有物品 |
| temperature | float | 温度值（摄氏度） |
| motorState | int | 电机状态：0=停止, 1=运行 |

## 注意事项

1. 确保手机和传送带设备连接到同一个 WiFi 网络
2. 当温度超过 30°C 时，系统会自动停止电机并触发蜂鸣器
3. 界面会自动刷新显示最新状态
